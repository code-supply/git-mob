#!/usr/bin/env bash

coauthors_file=${GIT_MOB_COAUTHORS=~/.git-coauthors}

@jq@ \
  --raw-output \
  "$(cat <<'EOF'
  .mob as $mob
| .coauthors
| to_entries
| map(select([.key] | inside($mob)))
| from_entries
| map("Co-authored-by: \(.name) <\(.email)>")[]
EOF
)" \
  < "$coauthors_file"
